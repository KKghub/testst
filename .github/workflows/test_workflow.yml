name: Test Workflow

on:
  pull_request:

env:
  GLOBAL_VAR: 7

jobs:
  job-1:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        test-case: [case-1, case-2]
        include:
          - test-case: case-1
            x: 1
            y: 2
          - test-case: case-2
            x: 3
            y: 4
    env:
      BOX_TYPE: cozy
    steps:
      # - name: Checkout
      #   uses: actions/checkout@v2
      - name: Set Output
        id: step-1
        run: |
          if [[ ${{ matrix.test-case }} == "case-1" ]]; then
            exit 0
          else
            exit 1
          fi

  job-2:
    runs-on: ubuntu-latest
    needs: job-1
    if: always()
    steps:
      - name: command test
        run: |
          echo $BOX_TYPE
          echo ${{ env.BOX_TYPE }}
          echo ${{ matrix.x }}
          echo ${{ matrix.y }}
          echo ${{ env.GLOBAL_VAR }}
          echo ${{ needs.job-1.outcome }}
          pwd
          ls -al